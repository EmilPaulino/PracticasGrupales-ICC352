<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Gestión de Artículos</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/blog/"/>
    <script src="../assets/js/color-modes.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900&display=swap" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/estilos/estilosArticulos.css"/>
    <link rel="stylesheet" href="/estilos/estilosNavbar.css"/>
</head>

<body>

<!-- Navbar -->
<div th:replace="~{/templates/fragmentos/navbar.html :: navbar}"></div>

<h2 class="mt-4 mb-4 text-center">Lista de Artículos</h2>

<div class="crearArticulo">
    <div class="text-end mb-3">
        <a class="btn btn-outline-success btn-sm"
           href="/articulos/crear">
            Crear Artículo
        </a>
    </div>
</div>

<div class="tablaArticulos">
    <table class="table table-striped">
        <thead>
        <tr class="text-center">
            <th>ID</th>
            <th>Título</th>
            <th>Autor</th>
            <th>Fecha</th>
            <th>Comentarios</th>
            <th>Etiquetas</th>
            <th>Acciones</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="a : ${articulos}">
            <td class="text-center" th:text="${a.id}">1</td>

            <td class="text-center" th:text="${a.titulo}">Título</td>

            <td class="text-center"
                th:text="${a.autor.username}">
            </td>

            <td class="text-center"
                th:text="${#dates.format(a.fecha,'dd/MM/yyyy')}">
            </td>

            <td class="text-center"
                th:text="${a.listaComentarios.size()}">
            </td>

            <td class="text-center"
                th:text="${a.listaEtiquetas.size()}">
            </td>

            <td class="text-center">

                <a th:href="@{'/articulos/editar/' + ${a.id}}"
                   class="btn btn-outline-primary btn-sm">
                    Editar
                </a>

                <button type="button"
                        class="btn btn-outline-danger btn-sm"
                        data-bs-toggle="modal"
                        th:data-bs-target="'#deleteModal' + ${a.id}">
                    Eliminar
                </button>

                <!-- Modal Eliminar -->
                <div class="modal fade"
                     th:id="'deleteModal' + ${a.id}"
                     tabindex="-1">

                    <div class="modal-dialog">
                        <div class="modal-content">

                            <div class="modal-header">
                                <h5 class="modal-title">
                                    Confirmar eliminación
                                </h5>
                                <button type="button"
                                        class="btn-close"
                                        data-bs-dismiss="modal">
                                </button>
                            </div>

                            <div class="modal-body">
                                ¿Estás seguro de que deseas eliminar el artículo
                                <b th:text="${a.titulo}"></b>?
                            </div>

                            <div class="modal-footer">
                                <button type="button"
                                        class="btn btn-secondary"
                                        data-bs-dismiss="modal">
                                    Cancelar
                                </button>

                                <a class="btn btn-danger"
                                   th:href="@{'/articulos/eliminar/' + ${a.id}}">
                                    Eliminar
                                </a>
                            </div>

                        </div>
                    </div>
                </div>

            </td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>